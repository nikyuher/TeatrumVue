import{d as y,r as u,g as C,o as h,c as x,b as e,w as v,v as _,h as N,i as m,j as k,k as S,t as T,l as V,m as E,p as U,f as I,_ as R,n as q,q as F,s as M,e as $}from"./index-h0uDIzYb.js";const g=a=>(U("data-v-0fafe8c0"),a=a(),I(),a),O={class:"input-box"},j=g(()=>e("label",null,"Username",-1)),B={class:"input-box"},D=g(()=>e("label",null,"Email",-1)),z={class:"input-box"},A=g(()=>e("label",null,"Password",-1)),J={class:"remember-forgot"},G=g(()=>e("button",{class:"btn",type:"submit"},"Register",-1)),Z=y({__name:"RegistrarUsuario",setup(a){const i=u(""),r=u(""),n=u(""),l=u(!1),o=u(""),w=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),p=s=>/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/.test(s),c=s=>s.length>=4,f=async()=>{if(!c(i.value)){o.value="El nombre debe tener al menos 4 caracteres",setTimeout(()=>{o.value=""},2e3);return}if(!w(r.value)){o.value="Por favor ingrese un correo electrónico válido",setTimeout(()=>{o.value=""},2e3);return}if(!p(n.value)){o.value="La contraseña debe tener al menos 8 caracteres, una mayúscula, una minúscula y un número",setTimeout(()=>{o.value=""},3e3);return}if(!l.value){o.value="Por favor acepte los Términos & Condiciones",setTimeout(()=>{o.value=""},2e3);return}const s={nombre:i.value,correoElectronico:r.value,contraseña:n.value};try{if(!(await fetch("http://localhost:8001/Usuario",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw new Error("Fallo al registrar al usuario.");i.value="",r.value="",n.value="",l.value=!1,o.value="Usuario Registrado Correctamente."}catch(t){o.value="Ocurrio un error al crear el Usuario.",console.error(t),setTimeout(()=>{o.value=""},2e3)}};return(s,t)=>{const P=C("v-alert");return h(),x("form",{onSubmit:E(f,["prevent"])},[e("div",O,[v(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=d=>i.value=d),required:""},null,512),[[_,i.value]]),j]),e("div",B,[v(e("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=d=>r.value=d),required:""},null,512),[[_,r.value]]),D]),e("div",z,[v(e("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=d=>n.value=d),required:""},null,512),[[_,n.value]]),A]),e("div",J,[e("label",null,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=d=>l.value=d)},null,512),[[N,l.value]]),m("I agree to the terms & conditions")])]),G,o.value?(h(),k(P,{key:0,value:!0,type:o.value.includes("Creado")?"success":"error"},{default:S(()=>[m(T(o.value),1)]),_:1},8,["type"])):V("",!0)],32)}}}),H=R(Z,[["__scopeId","data-v-0fafe8c0"]]),b=a=>(U("data-v-19a3cb90"),a=a(),I(),a),K={class:"input-box"},Q=b(()=>e("label",null,"Email",-1)),W={class:"input-box"},X=b(()=>e("label",null,"Password",-1)),Y=b(()=>e("div",{class:"remember-forgot"},[e("label",null,[e("input",{type:"checkbox"}),m(" Remember me ")]),e("a",{href:"#"},"Forgot Password?")],-1)),ee=b(()=>e("button",{class:"btn",type:"submit"},"Login",-1)),oe=y({__name:"LoguearUsuario",setup(a){const i=q(),r=u(""),n=u(""),l=u(""),o=F(),w=async()=>{try{const p={correoElectronico:r.value,contraseña:n.value};if(!(await fetch("http://localhost:8001/Usuario/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok)throw new Error("Fallo al Iniciar Sesion.");const s=await(await fetch(`http://localhost:8001/Usuario/login?email=${encodeURIComponent(r.value)}&password=${encodeURIComponent(n.value)}`)).json(),t={usuarioId:s.usuarioId,rol:s.rol,nombre:s.nombre,correoElectronico:r.value,contraseña:n.value};i.setUserInfo(t),r.value="",n.value="",l.value="Inicio Sesion Correctamente.",t.rol?o.push("/admin"):o.push("/")}catch(p){l.value="Error al Iniciar Sesion.",setTimeout(()=>{l.value=""},2e3),console.error(p)}};return(p,c)=>{const f=C("v-alert");return h(),x("form",{onSubmit:E(w,["prevent"])},[e("div",K,[v(e("input",{type:"email","onUpdate:modelValue":c[0]||(c[0]=s=>r.value=s),required:""},null,512),[[_,r.value]]),Q]),e("div",W,[v(e("input",{type:"password","onUpdate:modelValue":c[1]||(c[1]=s=>n.value=s),required:""},null,512),[[_,n.value]]),X]),Y,ee,l.value?(h(),k(f,{key:0,value:!0,type:l.value.includes("Creado")?"success":"error"},{default:S(()=>[m(T(l.value),1)]),_:1},8,["type"])):V("",!0)],32)}}}),se=R(oe,[["__scopeId","data-v-19a3cb90"]]),L=a=>(U("data-v-a91da8df"),a=a(),I(),a),te={class:"form-box login"},ae=L(()=>e("h2",null,"Login",-1)),re={class:"form-box register"},ne=L(()=>e("h2",null,"Registration",-1)),le=y({__name:"LoginView",setup(a){const i=u(!1),r=()=>{i.value=!0},n=()=>{i.value=!1};return(l,o)=>(h(),x("main",null,[e("article",null,[e("section",null,[e("div",{class:M({wrapper:!0,active:i.value})},[e("div",te,[ae,$(se),e("div",{class:"login-register"},[e("p",null,[m("Don't have an account?"),e("a",{href:"#",class:"register-link",onClick:r},"Register")])])]),e("div",re,[ne,$(H),e("div",{class:"login-register"},[e("p",null,[m("Already have an account?"),e("a",{href:"#",class:"login-link",onClick:n},"Login")])])])],2)])])]))}}),ue=R(le,[["__scopeId","data-v-a91da8df"]]);export{ue as default};
