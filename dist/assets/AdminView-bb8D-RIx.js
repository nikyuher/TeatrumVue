import{I as _e,J as pe,K as fe,L as be,M as he,N as ge,O as ye,P as we,Q as $e,R as xe,S as ke,T as Ce,e as a,F as Ie,V as Ue,U as Ee,W as re,X as Se,Y as Ve,d as M,s as H,r as f,g as c,o as g,j as U,k as s,i as T,E as G,b as e,t as C,l as B,p as W,f as J,_ as j,w as A,v as z,m as X,A as oe,z as K,c as V,Z as ue,D as Q,x as de,n as Te,$ as Oe,a0 as De}from"./index-t-VuXV_o.js";const Ae=_e({actionText:String,bgColor:String,color:String,icon:pe,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...fe(),...be(),...he({size:void 0}),...ge()},"VEmptyState"),Be=ye()({name:"VEmptyState",props:Ae(),emits:{"click:action":t=>!0},setup(t,x){let{emit:w,slots:i}=x;const{themeClasses:m}=we(t),{backgroundColorClasses:d,backgroundColorStyles:u}=$e(xe(t,"bgColor")),{dimensionStyles:l}=ke(t);function r(_){w("click:action",_)}return Ce(()=>{var v,h,I;const _=!!(i.actions||t.actionText),y=!!(i.headline||t.headline),p=!!(i.title||t.title),o=!!(i.text||t.text),n=!!(i.media||t.image||t.icon),b=t.size||(t.image?200:96);return a("div",{class:["v-empty-state",{[`v-empty-state--${t.justify}`]:!0},m.value,d.value,t.class],style:[u.value,l.value,t.style]},[n&&a("div",{key:"media",class:"v-empty-state__media"},[i.media?a(re,{key:"media-defaults",defaults:{VImg:{src:t.image,height:b},VIcon:{size:b,icon:t.icon}}},{default:()=>[i.media()]}):a(Ie,null,[t.image?a(Ue,{key:"image",src:t.image,height:b},null):t.icon?a(Ee,{key:"icon",size:b,icon:t.icon},null):void 0])]),y&&a("div",{key:"headline",class:"v-empty-state__headline"},[((v=i.headline)==null?void 0:v.call(i))??t.headline]),p&&a("div",{key:"title",class:"v-empty-state__title"},[((h=i.title)==null?void 0:h.call(i))??t.title]),o&&a("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Se(t.textWidth)}},[((I=i.text)==null?void 0:I.call(i))??t.text]),i.default&&a("div",{key:"content",class:"v-empty-state__content"},[i.default()]),_&&a("div",{key:"actions",class:"v-empty-state__actions"},[a(re,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:t.color,text:t.actionText}}},{default:()=>{var N;return[((N=i.actions)==null?void 0:N.call(i,{props:{onClick:r}}))??a(Ve,{onClick:r},null)]}})])])}),{}}}),Le=t=>(W("data-v-bbb98835"),t=t(),J(),t),Pe={class:"ajustar"},qe=Le(()=>e("input",{type:"submit",value:"Si"},null,-1)),ze=M({__name:"DeleteUser",props:{idObra:{}},emits:["confirmacion"],setup(t,{emit:x}){const w=t,i=x,m=H.baseUrl,d=f(""),u=async l=>{try{if(!w.idObra)throw new Error("Por favor ingrese un ID de usuario válido.");if(!(await fetch(`${m}/Usuario/${w.idObra}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Fallo al eliminar Usuario.");d.value="Eliminado Correctamente.",setTimeout(()=>{d.value=""},2e3),i("confirmacion",l)}catch(r){console.error(r),d.value="No se a podido Eliminar.",setTimeout(()=>{d.value=""},2e3)}};return(l,r)=>{const _=c("v-icon"),y=c("v-btn"),p=c("v-alert"),o=c("v-card-text"),n=c("v-card"),b=c("v-dialog");return g(),U(b,{"max-width":"500"},{activator:s(({props:v})=>[a(y,G(v,{rounded:""}),{default:s(()=>[a(_,{color:"white",size:"32"},{default:s(()=>[T(" mdi-delete ")]),_:1})]),_:2},1040)]),default:s(({isActive:v})=>[a(n,{title:"¿Seguro que quieres Eliminarlo?"},{default:s(()=>[a(o,null,{default:s(()=>[e("div",Pe,[a(y,{onClick:r[0]||(r[0]=h=>u(!0)),class:"bg-blue-darken-1"},{default:s(()=>[qe]),_:1}),a(y,{text:"No",onClick:h=>v.value=!1},null,8,["onClick"])]),d.value?(g(),U(p,{key:0,value:!0,type:d.value.includes("Correctamente")?"success":"error"},{default:s(()=>[T(C(d.value),1)]),_:1},8,["type"])):B("",!0)]),_:2},1024)]),_:2},1024)]),_:1})}}}),Fe=j(ze,[["__scopeId","data-v-bbb98835"]]),ae=t=>(W("data-v-f50deae0"),t=t(),J(),t),Me={class:"form-group"},je=ae(()=>e("label",{for:"nombre"},"Nombre",-1)),He={class:"form-group"},Ne=ae(()=>e("label",{for:"email"},"Correo",-1)),Re={class:"form-group"},We=ae(()=>e("label",{for:"password"},"Contraseña",-1)),Je=ae(()=>e("div",{class:"form-group"},[e("input",{type:"submit",value:"Enviar",class:"btn-submit"})],-1)),Ke=M({__name:"AddUser",emits:["confirmacion"],setup(t,{emit:x}){const w=H.baseUrl,i=x,m=f(""),d=f(""),u=f(""),l=f(""),r=o=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),_=o=>/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/.test(o),y=o=>o.length>=4,p=async o=>{try{if(!y(m.value)){l.value="El nombre debe tener al menos 4 caracteres",setTimeout(()=>{l.value=""},2e3);return}if(!r(d.value)){l.value="Por favor ingrese un correo electrónico válido",setTimeout(()=>{l.value=""},2e3);return}if(!_(u.value)){l.value="La contraseña debe tener al menos 8 caracteres, una mayúscula, una minúscula y un número",setTimeout(()=>{l.value=""},3e3);return}const n={nombre:m.value,correoElectronico:d.value,contraseña:u.value},b=await fetch(`${w}/Usuario/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!b.ok){const v=await b.json();throw new Error(v.message||"Fallo al Crear al usuario.")}m.value="",d.value="",u.value="",l.value="Creado Correctamente.",setTimeout(()=>{l.value=""},2e3),i("confirmacion",o)}catch(n){if(n instanceof Error)console.error(n),l.value=n.message||"Error al Crear Usuario.",setTimeout(()=>{l.value=""},2e3);else throw new Error(String(n))}};return(o,n)=>{const b=c("v-icon"),v=c("v-btn"),h=c("v-alert"),I=c("v-card-text"),N=c("v-card"),R=c("v-dialog");return g(),U(R,{"max-width":"500"},{activator:s(({props:O})=>[a(v,G(O,{rounded:""}),{default:s(()=>[a(b,{color:"white",size:"32"},{default:s(()=>[T(" mdi-plus ")]),_:1})]),_:2},1040)]),default:s(()=>[a(N,{title:"Crear Usuario"},{default:s(()=>[a(I,null,{default:s(()=>[e("form",{onSubmit:n[3]||(n[3]=X(O=>p(!0),["prevent"])),class:"form"},[e("div",Me,[je,A(e("input",{type:"text",id:"nombre","onUpdate:modelValue":n[0]||(n[0]=O=>m.value=O),required:""},null,512),[[z,m.value]])]),e("div",He,[Ne,A(e("input",{type:"email",id:"email","onUpdate:modelValue":n[1]||(n[1]=O=>d.value=O),required:""},null,512),[[z,d.value]])]),e("div",Re,[We,A(e("input",{type:"password",id:"password","onUpdate:modelValue":n[2]||(n[2]=O=>u.value=O),required:""},null,512),[[z,u.value]])]),Je,l.value?(g(),U(h,{key:0,value:!0,type:l.value.includes("Creado")?"success":"error"},{default:s(()=>[T(C(l.value),1)]),_:1},8,["type"])):B("",!0)],32)]),_:1})]),_:1})]),_:1})}}}),Ge=j(Ke,[["__scopeId","data-v-f50deae0"]]),Ze=t=>(W("data-v-e5c60104"),t=t(),J(),t),Qe={class:"contenedor"},Xe=Ze(()=>e("h2",null,"Lista de Usuarios",-1)),Ye={class:"response"},et=M({__name:"ListUser",setup(t){const x=H.baseUrl,w=f(""),i=f(0),m=f([]),d=f(""),u=[{title:"ID",key:"usuarioId"},{title:"Nombre",key:"nombre"},{title:"Correo",key:"correoElectronico"},{title:"Rol",key:"rol"}],l=async()=>{try{const p=await fetch(`${x}/Usuario`);if(!p.ok)throw new Error("Fallo al obtener la lista de usuarios.");const o=await p.json();m.value=o,i.value+=1}catch(p){console.error(p),d.value="Ha ocurrido un error al obtener la lista de usuarios."}};oe(l);const r=K(()=>{if(w.value.trim()==="")return m.value;{const p=w.value.toLowerCase();return m.value.filter(o=>o.nombre.toLowerCase().includes(p)||o.correoElectronico.toLowerCase().includes(p))}}),_=p=>{p&&(i.value+=1,l())},y=p=>{_(p)};return(p,o)=>{const n=c("v-text-field"),b=c("v-data-table");return g(),V("div",Qe,[Xe,a(n,{modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=v=>w.value=v),label:"Buscar por nombre o correo electrónico",onChange:l,outlined:"",dense:"",style:{width:"250px"}},null,8,["modelValue"]),a(Ge,{onConfirmacion:y}),(g(),U(b,{class:"ajustar",key:i.value,headers:u,items:r.value},{item:s(({item:v})=>[e("tr",null,[e("td",null,C(v.usuarioId),1),e("td",null,C(v.nombre),1),e("td",null,C(v.correoElectronico),1),e("td",null,C(v.rol?"Administrador":"Usuario"),1),a(Fe,{"id-obra":v.usuarioId,onConfirmacion:y},null,8,["id-obra"])])]),_:1},8,["items"])),e("p",Ye,C(d.value),1)])}}}),le=j(et,[["__scopeId","data-v-e5c60104"]]),Y=t=>(W("data-v-5fe92a0c"),t=t(),J(),t),tt=Y(()=>e("label",{for:"nombre"},"Nombre",-1)),ot=Y(()=>e("label",{for:"estado"},"Estado",-1)),at=Y(()=>e("option",{value:!0},"Ocupado",-1)),nt=Y(()=>e("option",{value:!1},"Disponible",-1)),st=[at,nt],rt=Y(()=>e("input",{type:"submit",value:"Enviar"},null,-1)),lt=M({__name:"AddButaca",emits:["confirmacion"],setup(t,{emit:x}){const w=H.baseUrl,i=x,m=f(""),d=f(!1),u=f(""),l=async r=>{try{const _={nombreAsiento:m.value,estado:d.value};if(!(await fetch(`${w}/Asiento`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)})).ok)throw new Error("Fallo al crear Butaca.");m.value="",d.value=!1,u.value="Creado Correctamente.",setTimeout(()=>{u.value=""},2e3),i("confirmacion",r)}catch(_){console.error(_),u.value="Ha ocurrido un Error al Crear .",setTimeout(()=>{u.value=""},2e3)}};return(r,_)=>{const y=c("v-icon"),p=c("v-btn"),o=c("v-alert"),n=c("v-card-text"),b=c("v-card"),v=c("v-dialog");return g(),U(v,{"max-width":"500"},{activator:s(({props:h})=>[a(p,G(h,{rounded:""}),{default:s(()=>[a(y,{color:"white",size:"32"},{default:s(()=>[T(" mdi-plus ")]),_:1})]),_:2},1040)]),default:s(()=>[a(b,{title:"Crear Butaca"},{default:s(()=>[a(n,null,{default:s(()=>[e("form",{onSubmit:_[2]||(_[2]=X(h=>l(!0),["prevent"]))},[tt,A(e("input",{type:"text",id:"nombre","onUpdate:modelValue":_[0]||(_[0]=h=>m.value=h),required:""},null,512),[[z,m.value]]),ot,A(e("select",{id:"estado","onUpdate:modelValue":_[1]||(_[1]=h=>d.value=h),required:""},st,512),[[ue,d.value]]),rt,u.value?(g(),U(o,{key:0,value:!0,type:u.value.includes("Creado")?"success":"error"},{default:s(()=>[T(C(u.value),1)]),_:1},8,["type"])):B("",!0)],32)]),_:1})]),_:1})]),_:1})}}}),it=j(lt,[["__scopeId","data-v-5fe92a0c"]]),ct={class:"ajustar"},ut=M({__name:"DeleteButaca",props:{idButaca:{}},emits:["confirmacion"],setup(t,{emit:x}){const w=t,i=x,m=H.baseUrl,d=f(w.idButaca),u=f(""),l=async r=>{try{if(!d.value)throw u.value="Error con la Optencion del ID.",new Error("Error con la Optencion del ID.");if(!(await fetch(`${m}/Asiento?id=${d.value}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw u.value="Error del Servidor",new Error("Error del Servidor");u.value="Eliminado Correctamente.",setTimeout(()=>{u.value=""},3e3),i("confirmacion",r)}catch(_){u.value="Fallo al Eliminar Butaca.",console.error(_)}};return(r,_)=>{const y=c("v-icon"),p=c("v-btn"),o=c("v-alert"),n=c("v-card-text"),b=c("v-card"),v=c("v-dialog");return g(),U(v,{"max-width":"500"},{activator:s(({props:h})=>[a(p,G(h,{rounded:""}),{default:s(()=>[a(y,{color:"white",size:"20"},{default:s(()=>[T(" mdi-delete ")]),_:1})]),_:2},1040)]),default:s(({isActive:h})=>[a(b,{title:"¿Seguro que quieres Eliminarlo?"},{default:s(()=>[a(n,null,{default:s(()=>[e("div",ct,[a(p,{onClick:_[0]||(_[0]=I=>l(!0)),type:"submit",text:"Si",class:"bg-blue-darken-1"}),a(p,{text:"No",onClick:I=>h.value=!1},null,8,["onClick"])]),u.value?(g(),U(o,{key:0,value:!0,type:u.value.includes("Correctamente")?"success":"error"},{default:s(()=>[T(C(u.value),1)]),_:1},8,["type"])):B("",!0)]),_:2},1024)]),_:2},1024)]),_:1})}}}),dt=j(ut,[["__scopeId","data-v-fd5d3e20"]]),ee=t=>(W("data-v-b1fa1b08"),t=t(),J(),t),vt={class:"contenedor"},mt=ee(()=>e("h2",null,"Lista de Butacas",-1)),_t=ee(()=>e("label",{for:"estado"},"Filtrar por estado:",-1)),pt=ee(()=>e("option",{value:null},"Todos",-1)),ft=ee(()=>e("option",{value:!0},"Ocupado",-1)),bt=ee(()=>e("option",{value:!1},"Disponible",-1)),ht=[pt,ft,bt],gt={class:"response"},yt=M({__name:"ListButaca",setup(t){const x=H.baseUrl,w=[{title:"ID",key:"asientoId"},{title:"Butaca",key:"nombreAsiento"},{title:"Estado",key:"estado"}],i=f([]),m=f(""),d=f(null),u=f(""),l=f(0),r=async()=>{try{const o=await fetch(`${x}/Asiento`);if(!o.ok)throw new Error("Fallo al obtener la lista de butacas.");const n=await o.json();i.value=n,l.value+=1}catch(o){console.error(o),m.value="Ha ocurrido un error al obtener la lista de butacas."}};oe(r);const _=K(()=>i.value.filter(o=>{const n=d.value===null||o.estado===d.value,b=u.value===""||o.nombreAsiento.toLowerCase().includes(u.value.toLowerCase());return n&&b})),y=o=>{o&&(l.value+=1,r())},p=o=>{y(o)};return(o,n)=>{const b=c("v-data-table");return g(),V("div",vt,[mt,e("div",null,[_t,A(e("select",{id:"estado","onUpdate:modelValue":n[0]||(n[0]=v=>d.value=v),onChange:r,class:"custom-select"},ht,544),[[ue,d.value]]),a(it,{onConfirmacion:p})]),A(e("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=v=>u.value=v),placeholder:"Buscar por nombre...",class:"input-field"},null,512),[[z,u.value]]),i.value.length>0?(g(),U(b,{key:l.value,headers:w,items:_.value},{item:s(({item:v})=>[e("tr",null,[e("td",null,C(v.asientoId),1),e("td",null,C(v.nombreAsiento),1),e("td",null,C(v.estado?"Ocupado":"Disponible"),1),a(dt,{"id-butaca":v.asientoId,onConfirmacion:p},null,8,["id-butaca"])])]),_:1},8,["items"])):B("",!0),e("p",gt,C(m.value),1)])}}}),ie=j(yt,[["__scopeId","data-v-b1fa1b08"]]),wt=t=>(W("data-v-fde09c08"),t=t(),J(),t),$t={class:"ajustar"},xt=wt(()=>e("input",{type:"submit",value:"Si"},null,-1)),kt=M({__name:"DeleteObra",props:{idObra:{}},emits:["confirmacion"],setup(t,{emit:x}){const w=t,i=x,m=f(""),d=H.baseUrl,u=async l=>{try{if(!w.idObra)throw m.value="Error con la Optencion del ID.",new Error("Error con la Optencion del ID.");if(!(await fetch(`${d}/Obra?id=${w.idObra}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Fallo al eliminar la obra.");m.value="Eliminada Correctamente.",setTimeout(()=>{m.value=""},2e3),i("confirmacion",l)}catch(r){console.error(r),m.value="No se a podido Eliminar.",setTimeout(()=>{m.value=""},2e3)}};return(l,r)=>{const _=c("v-icon"),y=c("v-btn"),p=c("v-alert"),o=c("v-card-text"),n=c("v-card"),b=c("v-dialog");return g(),U(b,{"max-width":"500"},{activator:s(({props:v})=>[a(y,G(v,{rounded:""}),{default:s(()=>[a(_,{color:"white",size:"32"},{default:s(()=>[T(" mdi-delete ")]),_:1})]),_:2},1040)]),default:s(({isActive:v})=>[a(n,{title:"¿Seguro que quieres Eliminarlo?"},{default:s(()=>[a(o,null,{default:s(()=>[e("div",$t,[a(y,{onClick:r[0]||(r[0]=h=>u(!0)),class:"bg-blue-darken-1"},{default:s(()=>[xt]),_:1}),a(y,{text:"No",onClick:h=>v.value=!1},null,8,["onClick"])]),m.value?(g(),U(p,{key:0,value:!0,type:m.value.includes("Correctamente")?"success":"error"},{default:s(()=>[T(C(m.value),1)]),_:1},8,["type"])):B("",!0)]),_:2},1024)]),_:2},1024)]),_:1})}}}),Ct=j(kt,[["__scopeId","data-v-fde09c08"]]),Z=t=>(W("data-v-b2315df1"),t=t(),J(),t),It=Z(()=>e("label",{for:"imagen"},"Imagen",-1)),Ut={key:0},Et=["src"],St=Z(()=>e("label",{for:"genero"},"Género",-1)),Vt=Z(()=>e("label",{for:"fechaHora"},"Fecha y Hora",-1)),Tt={class:"claseTiempo"},Ot=Z(()=>e("label",{for:"titulo"},"Título",-1)),Dt=Z(()=>e("label",null,"Descripción",-1)),At=Z(()=>e("label",{for:"precio"},"Precio",-1)),Bt=["disabled"],Lt=M({__name:"AddObra",emits:["confirmacion"],setup(t,{emit:x}){const w=H.baseUrl,i=x,m=f(null),d=f(""),u=f(""),l=f(""),r=f(""),_=f(0),y=f(0),p=f(0),o=f(""),n=f(null),b=K(()=>{const D=u.value?new Date(u.value):new Date;return D.setHours(y.value),D.setMinutes(p.value),D.toISOString()}),v=["comedia","terror","drama","musical","tragedia"],h=Array.from({length:24},(D,$)=>$),I=Array.from({length:60},(D,$)=>$),N=async D=>{try{let $={imagen:null,genero:d.value,título:l.value,descripción:r.value,fechaHora:b.value,precioEntrada:_.value};if(m.value){const P=await O(m.value);$={...$,imagen:P}}if(!(await fetch(`${w}/Obra`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($)})).ok)throw new Error("Fallo al crear la obra.");d.value="",l.value="",r.value="",_.value=0,y.value=0,p.value=0,o.value="Creado Correctamente.",setTimeout(()=>{o.value=""},2e3),i("confirmacion",D)}catch($){console.error($),o.value="Ha ocurrido un Error al Crear .",setTimeout(()=>{o.value=""},2e3)}},R=D=>{var P;const F=(P=D.target.files)==null?void 0:P[0];if(F){m.value=F;const q=new FileReader;q.onload=()=>{n.value=q.result},q.readAsDataURL(F)}},O=D=>new Promise(($,F)=>{const P=new FileReader;P.readAsDataURL(D),P.onload=()=>{const q=P.result.split(",")[1];$(q)},P.onerror=q=>F(q)}),L=K(()=>r.value.length),k=()=>{L.value>=250&&(r.value=r.value.substring(0,250))};return(D,$)=>{const F=c("v-icon"),P=c("v-btn"),q=c("v-select"),ne=c("v-alert"),se=c("v-card-text"),E=c("v-card"),me=c("v-dialog");return g(),U(me,{"max-width":"500"},{activator:s(({props:S})=>[a(P,G(S,{rounded:""}),{default:s(()=>[a(F,{color:"white",size:"32"},{default:s(()=>[T(" mdi-plus ")]),_:1})]),_:2},1040)]),default:s(()=>[a(E,{title:"Crear Obra"},{default:s(()=>[a(se,null,{default:s(()=>[e("form",{onSubmit:$[7]||($[7]=X(S=>N(!0),["prevent"]))},[It,e("input",{type:"file",id:"imagen",accept:"image/*",onChange:R,required:""},null,32),n.value?(g(),V("div",Ut,[e("img",{src:n.value,alt:"Imagen seleccionada",style:{"max-width":"100%",height:"200px","margin-bottom":"10px"}},null,8,Et)])):B("",!0),St,a(q,{modelValue:d.value,"onUpdate:modelValue":$[0]||($[0]=S=>d.value=S),items:v,density:"compact",label:"generos",required:""},null,8,["modelValue"]),Vt,A(e("input",{type:"date","onUpdate:modelValue":$[1]||($[1]=S=>u.value=S),required:""},null,512),[[z,u.value]]),e("div",Tt,[a(q,{modelValue:y.value,"onUpdate:modelValue":$[2]||($[2]=S=>y.value=S),items:Q(h),density:"compact",label:"horas",required:""},null,8,["modelValue","items"]),a(q,{modelValue:p.value,"onUpdate:modelValue":$[3]||($[3]=S=>p.value=S),items:Q(I),density:"compact",label:"minutos",required:""},null,8,["modelValue","items"])]),Ot,A(e("input",{type:"text",id:"titulo","onUpdate:modelValue":$[4]||($[4]=S=>l.value=S),required:""},null,512),[[z,l.value]]),Dt,A(e("input",{type:"text",id:"descripcion","onUpdate:modelValue":$[5]||($[5]=S=>r.value=S),maxlength:250,onInput:k,required:""},null,544),[[z,r.value]]),e("label",{class:de({"text-red":L.value<100}),for:"descripcion"}," Descripción (Mínimo 100 caracteres): "+C(L.value)+"/250 ",3),At,A(e("input",{type:"number",id:"precio","onUpdate:modelValue":$[6]||($[6]=S=>_.value=S),required:""},null,512),[[z,_.value]]),e("input",{type:"submit",value:"Enviar",disabled:L.value<100},null,8,Bt),o.value?(g(),U(ne,{key:1,value:!0,type:o.value.includes("Creado")?"success":"error"},{default:s(()=>[T(C(o.value),1)]),_:1},8,["type"])):B("",!0)],32)]),_:1})]),_:1})]),_:1})}}}),Pt=j(Lt,[["__scopeId","data-v-b2315df1"]]),te=t=>(W("data-v-7281db3e"),t=t(),J(),t),qt={class:"form-group"},zt=te(()=>e("label",{for:"genero"},"Género",-1)),Ft=te(()=>e("label",{for:"fechaHora"},"Fecha y Hora",-1)),Mt={class:"claseTiempo"},jt={class:"form-group"},Ht=te(()=>e("label",{for:"titulo"},"Título",-1)),Nt={class:"form-group"},Rt=te(()=>e("label",null,"Descripción",-1)),Wt={class:"form-group"},Jt=te(()=>e("label",{for:"precioEntrada"},"Precio de Entrada",-1)),Kt={class:"form-group"},Gt=["disabled"],Zt=M({__name:"PutInfoObra",props:{idObra:{}},emits:["confirmacion"],setup(t,{emit:x}){const w=t,i=x,m=H.baseUrl,d=f(w.idObra),u=f(""),l=f(""),r=f(""),_=f(0),y=f(0),p=f(""),o=f(0),n=f(""),b=K(()=>{const L=l.value?new Date(l.value):new Date;return L.setHours(_.value),L.setMinutes(y.value),L.toISOString()}),v=["comedia","terror","drama","musical","tragedia"],h=Array.from({length:24},(L,k)=>k),I=Array.from({length:60},(L,k)=>k),N=async L=>{try{const k={obraId:d.value,genero:u.value,título:r.value,fechaHora:b.value,descripción:p.value,precioEntrada:o.value};if(!(await fetch(`${m}/Obra/info?id=${d.value}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)})).ok)throw new Error("Fallo al actualizar la obra.");u.value="",r.value="",p.value="",o.value=0,n.value="Actualizado correctamente.",setTimeout(()=>{n.value=""},2e3),i("confirmacion",L)}catch(k){console.error(k),n.value="Ha ocurrido un error al actualizar la obra.",setTimeout(()=>{n.value=""},2e3)}},R=K(()=>p.value.length),O=()=>{R.value>=250&&(p.value=p.value.substring(0,250))};return(L,k)=>{const D=c("v-icon"),$=c("v-btn"),F=c("v-select"),P=c("v-alert"),q=c("v-card-text"),ne=c("v-card"),se=c("v-dialog");return g(),U(se,{"max-width":"500"},{activator:s(({props:E})=>[a($,G(E,{rounded:""}),{default:s(()=>[a(D,{color:"white",size:"32"},{default:s(()=>[T(" mdi-pencil ")]),_:1})]),_:2},1040)]),default:s(()=>[a(ne,{title:"Actualizar Informacion"},{default:s(()=>[a(q,null,{default:s(()=>[e("form",{onSubmit:k[7]||(k[7]=X(E=>N(!0),["prevent"])),class:"form"},[e("div",qt,[zt,a(F,{modelValue:u.value,"onUpdate:modelValue":k[0]||(k[0]=E=>u.value=E),items:v,density:"compact",label:"generos",required:""},null,8,["modelValue"])]),Ft,A(e("input",{type:"date","onUpdate:modelValue":k[1]||(k[1]=E=>l.value=E),required:""},null,512),[[z,l.value]]),e("div",Mt,[a(F,{modelValue:_.value,"onUpdate:modelValue":k[2]||(k[2]=E=>_.value=E),items:Q(h),density:"compact",label:"horas",required:""},null,8,["modelValue","items"]),a(F,{modelValue:y.value,"onUpdate:modelValue":k[3]||(k[3]=E=>y.value=E),items:Q(I),density:"compact",label:"minutos",required:""},null,8,["modelValue","items"])]),e("div",jt,[Ht,A(e("input",{type:"text",id:"titulo","onUpdate:modelValue":k[4]||(k[4]=E=>r.value=E),required:""},null,512),[[z,r.value]])]),e("div",Nt,[Rt,A(e("input",{type:"text",id:"descripcion","onUpdate:modelValue":k[5]||(k[5]=E=>p.value=E),maxlength:250,onInput:O,required:""},null,544),[[z,p.value]]),e("label",{class:de({"text-red":R.value<100}),for:"descripcion"}," Descripción (Mínimo 100 caracteres): "+C(R.value)+"/250 ",3)]),e("div",Wt,[Jt,A(e("input",{type:"number",id:"precioEntrada","onUpdate:modelValue":k[6]||(k[6]=E=>o.value=E),required:""},null,512),[[z,o.value]])]),e("div",Kt,[e("input",{type:"submit",value:"Actualizar",class:"btn-submit",disabled:R.value<100},null,8,Gt)]),n.value?(g(),U(P,{key:0,value:!0,type:n.value.includes("Actualizado")?"success":"error"},{default:s(()=>[T(C(n.value),1)]),_:1},8,["type"])):B("",!0)],32)]),_:1})]),_:1})]),_:1})}}}),Qt=j(Zt,[["__scopeId","data-v-7281db3e"]]),ve=t=>(W("data-v-62495d27"),t=t(),J(),t),Xt=ve(()=>e("label",{for:"imagen"},"Nueva Imagen",-1)),Yt={key:0},eo=["src"],to=ve(()=>e("input",{type:"submit",value:"Enviar"},null,-1)),oo=M({__name:"PutImgObra",props:{idObra:{}},emits:["confirmacion"],setup(t,{emit:x}){const w=t,i=x,m=H.baseUrl,d=f(w.idObra),u=f(null),l=f(""),r=f(null),_=async o=>{try{if(!u.value)throw new Error("Por favor seleccione una imagen.");const n=await p(u.value),b={obraId:d.value,imagen:n};if(!(await fetch(`${m}/Obra/img?id=${d.value}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).ok)throw new Error("Fallo al actualizar la imagen de la obra.");l.value="Actualizado correctamente.",setTimeout(()=>{l.value=""},2e3),i("confirmacion",o)}catch(n){console.error(n),l.value="Ha ocurrido un error al actualizar la imagen de la obra.",setTimeout(()=>{l.value=""},2e3)}},y=o=>{var v;const b=(v=o.target.files)==null?void 0:v[0];if(b){u.value=b;const h=new FileReader;h.onload=()=>{r.value=h.result},h.readAsDataURL(b)}},p=o=>new Promise((n,b)=>{const v=new FileReader;v.readAsDataURL(o),v.onload=()=>{const h=v.result.split(",")[1];n(h)},v.onerror=h=>b(h)});return(o,n)=>{const b=c("v-icon"),v=c("v-btn"),h=c("v-alert"),I=c("v-card-text"),N=c("v-card"),R=c("v-dialog");return g(),U(R,{"max-width":"500"},{activator:s(({props:O})=>[a(v,G(O,{rounded:""}),{default:s(()=>[a(b,{color:"white",size:"32"},{default:s(()=>[T(" mdi-paperclip ")]),_:1})]),_:2},1040)]),default:s(()=>[a(N,{title:"Actualizar Imagen"},{default:s(()=>[a(I,null,{default:s(()=>[e("form",{onSubmit:n[0]||(n[0]=X(O=>_(!0),["prevent"]))},[Xt,e("input",{type:"file",id:"imagen",accept:"image/*",onChange:y,required:""},null,32),r.value?(g(),V("div",Yt,[e("img",{src:r.value,alt:"Imagen seleccionada",style:{"max-width":"100%",height:"200px","margin-bottom":"10px"}},null,8,eo)])):B("",!0),to,l.value?(g(),U(h,{key:1,value:!0,type:l.value.includes("Actualizado")?"success":"error"},{default:s(()=>[T(C(l.value),1)]),_:1},8,["type"])):B("",!0)],32)]),_:1})]),_:1})]),_:1})}}}),ao=j(oo,[["__scopeId","data-v-62495d27"]]),no=t=>(W("data-v-77ffdfe6"),t=t(),J(),t),so={class:"contenedor"},ro=no(()=>e("h2",null,"Listado de Obras",-1)),lo={class:"response"},io=M({__name:"ListObra",setup(t){const x=H.baseUrl,w=f(""),i=f([]),m=f(""),d=f(0),u=[{title:"ID",key:"obraId"},{title:"Imagen",key:"imagen"},{title:"Título",key:"título"},{title:"Género",key:"genero"},{title:"Descripción",key:"descripción"},{title:"Fecha Hora",key:"fechaHora"},{title:"Precio",key:"precioEntrada"}],l=async()=>{try{const o=await fetch(`${x}/Obra`);if(!o.ok)throw new Error("Fallo al obtener la lista de obras.");const n=await o.json();n.forEach(b=>{b.imagen=`data:image/jpeg;base64,${b.imagen}`}),i.value=n,d.value+=1}catch(o){console.error(o),m.value="Ha ocurrido un error al obtener la lista de obras."}};oe(l);const r=K(()=>i.value.filter(o=>o.título.toLowerCase().includes(w.value.toLowerCase())||o.genero.toLowerCase().includes(w.value.toLowerCase()))),_=o=>o.length>30?`${o.slice(0,30)}...`:o,y=o=>{o&&(d.value+=1,l())},p=o=>{y(o)};return(o,n)=>{const b=c("v-text-field"),v=c("v-img"),h=c("v-data-table");return g(),V("div",so,[ro,a(b,{modelValue:w.value,"onUpdate:modelValue":n[0]||(n[0]=I=>w.value=I),label:"Buscar",outlined:"",onChange:l,dense:"",style:{width:"250px"}},null,8,["modelValue"]),a(Pt,{onConfirmacion:p}),i.value.length>0?(g(),U(h,{class:"ajustar",key:d.value,headers:u,items:r.value,"item-key":"obraId"},{item:s(({item:I})=>[e("tr",null,[e("td",null,C(I.obraId),1),e("td",null,[a(v,{src:I.imagen,height:"55",contain:""},null,8,["src"])]),e("td",null,C(_(I.título)),1),e("td",null,C(I.genero),1),e("td",null,C(_(I.descripción)),1),e("td",null,C(I.fechaHora),1),e("td",null,"$"+C(I.precioEntrada),1),a(Qt,{"id-obra":I.obraId,onConfirmacion:p},null,8,["id-obra"]),a(ao,{"id-obra":I.obraId,onConfirmacion:p},null,8,["id-obra"]),a(Ct,{"id-obra":I.obraId,onConfirmacion:p},null,8,["id-obra"])])]),_:1},8,["items"])):B("",!0),e("p",lo,C(m.value),1)])}}}),ce=j(io,[["__scopeId","data-v-77ffdfe6"]]),co={key:0},uo={key:0,class:"contDiseñoMobil"},vo={class:"navMobil"},mo={key:0,class:"form-box"},_o={key:1,class:"form-box"},po={key:2,class:"form-box"},fo={key:1,class:"contDiseñoWindows"},bo={key:0,class:"form-box"},ho={key:1,class:"form-box"},go={key:2,class:"form-box"},yo={key:1,class:"contenedorError"},wo=M({__name:"AdminView",setup(t){const x=Te(),w=K(()=>x.userInfo!==null&&x.userInfo.rol),i=f("user"),m=l=>{i.value=l},d=f(window.innerWidth),u=()=>{d.value=window.innerWidth};return oe(()=>{window.addEventListener("resize",u)}),Oe(()=>{u()}),De(d,l=>{}),(l,r)=>(g(),V("main",null,[w.value?(g(),V("div",co,[d.value<=866?(g(),V("div",uo,[e("div",vo,[e("nav",null,[e("ul",null,[e("li",{onClick:r[0]||(r[0]=_=>m("user"))},"Usuario"),e("li",{onClick:r[1]||(r[1]=_=>m("obra"))},"Obra"),e("li",{onClick:r[2]||(r[2]=_=>m("butaca"))},"Butaca")])])]),e("article",null,[e("section",null,[i.value==="user"?(g(),V("div",mo,[a(le)])):i.value==="obra"?(g(),V("div",_o,[a(ce)])):i.value==="butaca"?(g(),V("div",po,[a(ie)])):B("",!0)])])])):(g(),V("div",fo,[e("nav",null,[e("ul",null,[e("li",{onClick:r[3]||(r[3]=_=>m("user"))},"Usuario"),e("li",{onClick:r[4]||(r[4]=_=>m("obra"))},"Obra"),e("li",{onClick:r[5]||(r[5]=_=>m("butaca"))},"Butaca")])]),e("article",null,[e("section",null,[i.value==="user"?(g(),V("div",bo,[a(le)])):i.value==="obra"?(g(),V("div",ho,[a(ce)])):i.value==="butaca"?(g(),V("div",go,[a(ie)])):B("",!0)])])]))])):(g(),V("div",yo,[a(Q(Be),{headline:"Whoops, 404",title:"Page not found",text:"Parece que no tienes Accseso a esta pestaña",image:"https://vuetifyjs.b-cdn.net/docs/images/components/v-empty-state/astro-cat.svg"})]))]))}}),xo=j(wo,[["__scopeId","data-v-747e259a"]]);export{xo as default};
