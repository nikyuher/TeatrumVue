import{d as g,n as N,q as F,g as n,o as _,j as U,k as l,i as p,_ as k,r as h,e as t,m as G,t as E,l as S,y as j,c as x,B as A,F as D,b as i,p as M,f as R}from"./index-h0uDIzYb.js";const H=g({__name:"CerrarSesion",setup(v){const o=N(),s=F(),r=async()=>{try{o.setUserInfo(null),s.push("/")}catch(e){console.log(e)}};return(e,c)=>{const a=n("v-btn");return _(),U(a,{onClick:r,color:"error",dark:""},{default:l(()=>[p(" Cerrar Sesión ")]),_:1})}}}),J=k(H,[["__scopeId","data-v-f4ae665b"]]),L=g({__name:"ChangeName",setup(v){var C;const o=h(""),s=h(""),r=h(""),e=N(),c=(C=e.userInfo)==null?void 0:C.usuarioId,a=h(""),w=async()=>{var b,u,d,f;try{if(o.value.trim()===""&&s.value.trim()===""&&r.value.trim()==="")throw a.value="No hay cambios que hacer",setTimeout(()=>{a.value=""},2e3),new Error("No hay cambios que hacer");const m={usuarioId:c,nombre:o.value.trim()!==""?o.value.trim():(b=e.userInfo)==null?void 0:b.nombre,correoElectronico:s.value.trim()!==""?s.value.trim():(u=e.userInfo)==null?void 0:u.correoElectronico,contraseña:r.value.trim()!==""?r.value.trim():(d=e.userInfo)==null?void 0:d.contraseña},y=await fetch(`http://localhost:8001/Usuario/${c}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(!y.ok)throw new Error("Fallo al Hacer cambios.");const V={usuarioId:c!==void 0?c:0,rol:((f=e.userInfo)==null?void 0:f.rol)!==void 0?e.userInfo.rol:!1,nombre:m.nombre,correoElectronico:m.correoElectronico,contraseña:m.contraseña};y.ok&&(e.setUserInfo(V),a.value="Guardado Correctamente",o.value="",s.value="",r.value="",setTimeout(()=>{a.value=""},2e3))}catch(m){a.value="El valor ya esta en Uso",setTimeout(()=>{a.value=""},2e3),console.log(m)}};return(b,u)=>{const d=n("v-card-title"),f=n("v-text-field"),m=n("v-btn"),y=n("v-form"),V=n("v-alert"),$=n("v-card-text"),B=n("v-card"),q=n("v-container");return _(),U(q,null,{default:l(()=>[t(B,{class:"ma-8"},{default:l(()=>[t(d,{class:"headline"},{default:l(()=>[p("Cambiar Información")]),_:1}),t($,null,{default:l(()=>[t(y,{onSubmit:G(w,["prevent"])},{default:l(()=>[t(f,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=I=>o.value=I),label:"Nombre",placeholder:"Nombre Usuario"},null,8,["modelValue"]),t(f,{modelValue:s.value,"onUpdate:modelValue":u[1]||(u[1]=I=>s.value=I),label:"Correo Electrónico",placeholder:"correo@gmail.com",type:"email"},null,8,["modelValue"]),t(f,{modelValue:r.value,"onUpdate:modelValue":u[2]||(u[2]=I=>r.value=I),label:"Contraseña",placeholder:"Contraseña",type:"password"},null,8,["modelValue"]),t(m,{class:"mr-4",type:"submit",color:"primary"},{default:l(()=>[p("Guardar")]),_:1})]),_:1}),a.value?(_(),U(V,{key:0,value:!0,type:a.value.includes("Guardado")?"success":"error"},{default:l(()=>[p(E(a.value),1)]),_:1},8,["type"])):S("",!0)]),_:1})]),_:1})]),_:1})}}}),O=k(L,[["__scopeId","data-v-9fac8622"]]),P=g({__name:"InfoUser",setup(v){const o=N(),s=j(()=>{var r,e,c,a;return[{label:"Rol",value:(r=o.userInfo)!=null&&r.rol?"Administrador":"Usuario"},{label:"Nombre",value:(e=o.userInfo)==null?void 0:e.nombre},{label:"Correo Electrónico",value:(c=o.userInfo)==null?void 0:c.correoElectronico},{label:"Contraseña",value:(a=o.userInfo)==null?void 0:a.contraseña}]});return(r,e)=>{const c=n("v-card-title"),a=n("v-col"),w=n("v-row"),C=n("v-container"),b=n("v-card-text"),u=n("v-card");return _(),U(u,{class:"info-card"},{default:l(()=>[t(c,{class:"info-title"},{default:l(()=>[p("Detalles del Usuario")]),_:1}),t(b,null,{default:l(()=>[t(C,null,{default:l(()=>[(_(!0),x(D,null,A(s.value,d=>(_(),U(w,{key:d.label,class:"info-row"},{default:l(()=>[t(a,{cols:"4",class:"info-label"},{default:l(()=>[p(E(d.label)+":",1)]),_:2},1024),t(a,{cols:"8",class:"info-value"},{default:l(()=>[p(E(d.value),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})}}}),z=k(P,[["__scopeId","data-v-3682461e"]]),T=v=>(M("data-v-6a00bc3e"),v=v(),R(),v),K={class:"wrapper"},Q={key:0,class:"form-box"},W=T(()=>i("h2",null,"Información Usuario",-1)),X={key:1,class:"form-box"},Y=T(()=>i("h2",null,"Cambiar Información",-1)),Z=g({__name:"SettingUser",setup(v){const o=h("info"),s=r=>{o.value=r};return(r,e)=>(_(),x("main",null,[i("div",null,[i("nav",null,[i("ul",null,[i("li",{onClick:e[0]||(e[0]=c=>s("info"))},"Información Usuario"),i("li",{onClick:e[1]||(e[1]=c=>s("change"))},"Cambiar Información"),i("li",null,[t(J)])])]),i("article",null,[i("section",null,[i("div",K,[o.value==="info"?(_(),x("div",Q,[W,t(z)])):o.value==="change"?(_(),x("div",X,[Y,t(O)])):S("",!0)])])])])]))}}),oe=k(Z,[["__scopeId","data-v-6a00bc3e"]]);export{oe as default};
